ALTER ALGORITHM=UNDEFINED  SQL SECURITY DEFINER VIEW `view_vanzari` AS (select `p`.`denumire` AS `denumire`,sum(round((`bc`.`cantitate` * (`bp`.`suma` / `b`.`total`)),2)) AS `cantitate`,`bc`.`valoare` - `bc`.`valoare`*`bc`.`discount`/100 AS `valoare`,`m`.`nume_mod` AS `nume_mod`,`m`.`mod_plata_id` AS `mod_plata_id`,`c`.`denumire_categorie` AS `denumire_categorie`,`cf`.`casa_id` AS `casa_id`,`cf`.`nume_casa` AS `nume_casa`,`u`.`user_id` AS `user_id`,`u`.`nume` AS `nume`,`z`.`data` AS `data`,`z`.`zi_economica_id` AS `zi_economica_id` from ((((((((`bonuri_continut` `bc` join `bonuri` `b` on((`bc`.`bon_id` = `b`.`bon_id`))) join `bonuri_plata` `bp` on((`bc`.`bon_id` = `bp`.`bon_id`))) join `moduri_plata` `m` on((`bp`.`mod_plata_id` = `m`.`mod_plata_id`))) join `produse` `p` on((`bc`.`produs_id` = `p`.`produs_id`))) join `categorii` `c` on((`p`.`categorie_id` = `c`.`categorie_id`))) join `users` `u` on((`b`.`user_id` = `u`.`user_id`))) join `case_fiscale` `cf` on((`b`.`casa_id` = `cf`.`casa_id`))) join `zile_economice` `z` on((`b`.`zi_economica_id` = `z`.`zi_economica_id`))) group by `p`.`denumire`,`bc`.`valoare`,`m`.`nume_mod`,`m`.`mod_plata_id`,`z`.`data`,`z`.`zi_economica_id`,`c`.`denumire_categorie`,`u`.`nume`,`u`.`user_id`,`cf`.`casa_id`,`cf`.`nume_casa`);